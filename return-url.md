---
layout: book
title: 同步通知
---

视频：06_return_url.mov

### 内容简介
支付宝返回信息之同步通知。先讲原理后上代码。有了同步通知为何还要有异步通知？视频中为您揭晓。

### 支付宝通知

当客户把钱打到支付宝之后，支付宝会通知网站，通知分两种形式：

页面跳转同步通知。支付宝根据得到的数据处理完成后，当前页面从支付宝的页面自动跳转回商户的网站，
同时携带处理完成的结果信息反馈给商户网站。

同步通知，若请求参数 return_url 不为空，则支付宝和客户交易完成后，会跳转到网站指定的页面。

服务器异步通知。支付宝根据得到的数据处理完成后，支付宝的服务器主动发起通知给商户的网站，
同时携带处理完成的结果信息反馈给商户网站。


### 有了同步通知为何还要有异步通知？

异步通知，为什么要有异步通知？ 在客户给支付宝付款成功之后，支付宝会等待几秒钟才会跳转到网站指定的页面，
心急的用户可能会关闭支付宝页面，这时网站就不能得到支付宝返回的参数。异步通知就起作用了。

异步通知需要设置请求参数 notify_url，若网站不给支付宝反馈文本 `sucess`
字样，支付宝会不断向网站发送通知，超过一定时间则终止。


在 [rei 的 README 文档](https://github.com/chloerei/alipay#example)上，`return_url` 中设置了 `out_trade_no` 是个好主意。
